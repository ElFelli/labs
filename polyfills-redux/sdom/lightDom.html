<!--
Copyright 2012 The Toolkitchen Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script src="sdom.js"></script>
  </head>
  <body>
    <div id="A"><span>Hello World</span></div>
    <script>
      LightDOMNohd = function(inNode) {
        Nohd.call(this, inNode);
        // lightDOM is a Nohd
        this.lightDOM = inNode.lightDOM;
      };
      LightDOMNohd.prototype = Object.create(Nohd.prototype);
      //
      mixin(LightDOMNohd.prototype, {
        appendChild: function(inChild) {
          console.log(inChild);
          return this.lightDOM.appendChild(inChild);
        },
        get childNodes() {
          return this.lightDOM.childNodes;
        }
      });
      //
      var $SDOM = SDOM;
      SDOM = function(inNode) {
        if (!inNode) {
          return null;
        }
        if (inNode.$nohd) {
          return inNode.$nohd;
        }
        var ctor = Nohd;
        if (inNode.lightDOM) {
          ctor = LightDOMNohd;
        }
        return inNode.$nohd = new ctor(inNode);
      };
      //
      LightDOM = function(inNode) {
        inNode.lightDOM = document.createElement('lightDOM');
      };
      //
      LightDOM(A);
      AA = SDOM(A);
      console.log(AA.appendChild(document.createTextNode("Squid")));
      console.dir(AA.childNodes);
    </script>
  </body>
</html>
