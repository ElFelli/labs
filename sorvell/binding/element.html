<!doctype html>
<html>
<head>
  <title>pages-lazy</title>
  <script src="../../../components/platform-dev/platform.js"></script>
  <link rel="import" href="../../../components/polymer/polymer.html">
</head>
<body unresolved>
  <polymer-element name="x-thing" attributes="count">
    <script>
      Polymer('x-thing', {
        /*
        created: function() {
          this.list = [];
        },
        */
        countChanged: function() {
          //setTimeout(function() {
            this.list = [];
            setTimeout(function() {
              this.list.push(5);
              this.list.push(5555);
            }.bind(this))
          //}.bind(this));
        }
      });
    </script>
  </polymer-element>


  <template bind>
    <x-thing count="5"></x-thing>
    <template repeat="{{element.list}}">
      <div>{{}}</div>
    </template>
    <template repeat="{{obj.list}}">
      <div>{{}}</div>
    </template>
  </template>
  <script>
    document.addEventListener('polymer-ready', function() {
      var template = document.querySelector('template');
      var model = {};
      var dom = template.createInstance(model);
      document.body.appendChild(dom);

      var element = document.querySelector('x-thing');
      console.log(element._elementPrepared, element.list);
      //setTimeout(function() {
        //model.element = element;
        
        var obj = {};
        

        model.obj = obj;
        
        setTimeout(function() {
          obj.list = [1, 2, 3, 4];
        })

      //}, 500);
    });
  </script>
  
</body>
</html>
