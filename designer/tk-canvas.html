<!--
Copyright 2013 The Toolkitchen Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<element name="tk-canvas" on-mouseup="up">
  <template>
    <style>
      @host {
        * {
          background-image: url(assets/dot.png)
        }
      }
    </style>
    <content></content>
  </template>

  <script>
    Toolkit.register(this, {
      grid: 16,
      snap: function(inX, inY) {
        return {
          x: Math.round(inX / this.grid) * this.grid,
          y: Math.round(inY / this.grid) * this.grid
        };
      },
      up: function(event) {
        this.send('canvas-drop', this.snap(event.offsetX, event.offsetY));
      }
    });
  </script>

</element>