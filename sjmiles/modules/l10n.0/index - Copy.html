<!doctype html>

<html>

<head>

  <title>imports modules</title>

  <script src="components/platform-dev/platform.js"></script>

  <link rel="import" href="localizable.html">
  <link rel="import" href="components/polymer/polymer.html"></link>

  <script src="components/webL10n/l10n.js"></script>
  <link rel="arbitrary" type="application/l10n" href="data.ini" />

</head>

<body unresolved>

  <p><element-a></element-a></p>

  <p><element-b></element-b></p>
  <p><element-b></element-b></p>

  <p><element-c></element-c></p>
  <p><element-c></element-c></p>

  <polymer-element name="element-a">

    <template>
      {{hello}}
    </template>

    <script>

      var hello;

      loadLocale('fr', function() {
        hello = _('test');
        //hello = marshal('l10n');
      });

      function loadLocale(locale, callback) {
        document.querySelector('[rel=arbitrary]').href = 'data_' + locale + '.ini';
        var script = document.createElement('script');
        //script.setAttribute('src', 'components/webL10n/l10n.js');
        //script.setAttribute('src', 'l10n.js');
        script.onload = function() {
          console.log(document.webL10n);
          callback();
        };
        document.body.appendChild(script);
      }

      Polymer('element-a', function() {

        return  {

            ready: function() {
              this.hello = hello;
            }

          };

      });

    </script>

  </polymer-element>

</body>

</html>